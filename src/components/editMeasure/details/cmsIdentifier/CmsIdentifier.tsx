import React from "react";
import {
  InputLabel,
  MadieTooltip,
  Button,
  ReadOnlyTextField,
} from "@madie/madie-design-system/dist/react";

export default function CmsIdentifier({ label, cmsId, model, onClick }) {
  return (
    <div
      style={{
        width: 1,
        display: "flex",
        flexDirection: "column",
        flexGrow: 1,
        fontFamily: "Rubik",
        lineHeight: "19px",
        fontSize: "16px",
      }}
    >
      <div style={{ display: "flex", flexDirection: "row" }}>
        <InputLabel for="cmsId">{label}</InputLabel>

        <div>
          <MadieTooltip
            tooltipText="Once a CMS Identifier has been generated it may not be modified or removed for any draft or version of a measure."
            id={`cms-id-tooltip`}
          />
        </div>
      </div>

      {cmsId > 0 ? (
        <ReadOnlyTextField
          tabIndex={0}
          placeholder="CMS ID"
          id="cmsId"
          data-testid="cms-id-text-field"
          inputProps={{ "data-testid": "cms-id-input" }}
          size="small"
          value={model.startsWith("QI-Core") ? `${cmsId}FHIR` : cmsId}
          area-describedby="cms-id-tooltip"
        />
      ) : (
        <Button
          variant="secondary"
          onClick={onClick}
          data-testid="generate-cms-id-button"
          area-describedby="cms-id-tooltip"
          style={{
            border: "none",
          }}
        >
          <div style={{ display: "flex", alignItems: "center" }}>
            <svg
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.04902 1.225C1.04902 1.17859 1.06744 1.13408 1.10023 1.10126C1.13302 1.06844 1.17749 1.05 1.22386 1.05H10.665C10.7114 1.05 10.7559 1.06844 10.7887 1.10126C10.8214 1.13408 10.8399 1.17859 10.8399 1.225V8.225C10.8399 8.36424 10.8951 8.49777 10.9935 8.59623C11.0919 8.69469 11.2253 8.75 11.3644 8.75C11.5035 8.75 11.6369 8.69469 11.7353 8.59623C11.8336 8.49777 11.8889 8.36424 11.8889 8.225V1.225C11.8889 0.90011 11.7599 0.588526 11.5304 0.358794C11.3009 0.129062 10.9896 0 10.665 0H1.22386C0.899269 0 0.587976 0.129062 0.358459 0.358794C0.128942 0.588526 0 0.90011 0 1.225V12.775C0 13.4512 0.548287 14 1.22386 14H6.11928C6.25839 14 6.3918 13.9447 6.49016 13.8462C6.58852 13.7478 6.64379 13.6142 6.64379 13.475C6.64379 13.3358 6.58852 13.2022 6.49016 13.1038C6.3918 13.0053 6.25839 12.95 6.11928 12.95H1.22386C1.17749 12.95 1.13302 12.9316 1.10023 12.8987C1.06744 12.8659 1.04902 12.8214 1.04902 12.775V1.225Z"
                fill="#0073C8"
              />
              <path
                d="M2.97226 3.5C2.83315 3.5 2.69974 3.55531 2.60138 3.65377C2.50301 3.75223 2.44775 3.88576 2.44775 4.025C2.44775 4.16424 2.50301 4.29777 2.60138 4.39623C2.69974 4.49469 2.83315 4.55 2.97226 4.55H8.9167C9.05581 4.55 9.18922 4.49469 9.28759 4.39623C9.38595 4.29777 9.44121 4.16424 9.44121 4.025C9.44121 3.88576 9.38595 3.75223 9.28759 3.65377C9.18922 3.55531 9.05581 3.5 8.9167 3.5H2.97226ZM2.44775 6.825C2.44775 6.68576 2.50301 6.55223 2.60138 6.45377C2.69974 6.35531 2.83315 6.3 2.97226 6.3H6.11932C6.25843 6.3 6.39184 6.35531 6.4902 6.45377C6.58857 6.55223 6.64383 6.68576 6.64383 6.825C6.64383 6.96424 6.58857 7.09777 6.4902 7.19623C6.39184 7.29469 6.25843 7.35 6.11932 7.35H2.97226C2.83315 7.35 2.69974 7.29469 2.60138 7.19623C2.50301 7.09777 2.44775 6.96424 2.44775 6.825ZM13.8331 9.996C13.8846 9.94794 13.926 9.88998 13.9546 9.82558C13.9833 9.76118 13.9987 9.69166 14 9.62117C14.0012 9.55067 13.9883 9.48065 13.9619 9.41528C13.9355 9.34991 13.8962 9.29053 13.8464 9.24067C13.7966 9.19082 13.7373 9.15152 13.672 9.12511C13.6067 9.09871 13.5367 9.08574 13.4663 9.08699C13.3959 9.08823 13.3264 9.10366 13.2621 9.13235C13.1977 9.16105 13.1398 9.20242 13.0918 9.254L9.61605 12.733L8.23834 11.354C8.19032 11.3024 8.13241 11.261 8.06807 11.2324C8.00373 11.2037 7.93428 11.1882 7.86385 11.187C7.79343 11.1857 7.72347 11.1987 7.65816 11.2251C7.59285 11.2515 7.53352 11.2908 7.48372 11.3407C7.43391 11.3905 7.39465 11.4499 7.36827 11.5153C7.34189 11.5807 7.32893 11.6507 7.33017 11.7212C7.33142 11.7917 7.34683 11.8612 7.3755 11.9256C7.40417 11.99 7.4455 12.0479 7.49703 12.096L9.2454 13.846C9.34374 13.9443 9.47705 13.9995 9.61605 13.9995C9.75504 13.9995 9.88836 13.9443 9.9867 13.846L13.8331 9.996Z"
                fill="#0073C8"
              />
            </svg>
            <span style={{ marginLeft: "3px", color: "#0073C8" }}>
              Generate ID
            </span>
          </div>
        </Button>
      )}
    </div>
  );
}
